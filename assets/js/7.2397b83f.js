(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{376:function(a,t){a.exports="data:image/png;base64,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"},385:function(a,t,s){"use strict";s.r(t);var e=s(26),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[a._v("#")]),a._v(" Installation")]),a._v(" "),e("p",[a._v("Cryb requires a Redis and a MongoDB server, NodeJS, Yarn and Docker.")]),a._v(" "),e("h2",{attrs:{id:"yarn-repo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn-repo"}},[a._v("#")]),a._v(" Yarn Repo")]),a._v(" "),e("p",[a._v("First we add the yarn repo")]),a._v(" "),e("h3",{attrs:{id:"ubuntu-server-20-04-lts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-server-20-04-lts"}},[a._v("#")]),a._v(" Ubuntu Server 20.04 LTS")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -sL https://dl.yarnpkg.com/debian/pubkey.gpg "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" apt-key "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" -\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb https://dl.yarnpkg.com/debian/ stable main"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/apt/sources.list.d/yarn.list\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update\n")])])]),e("h3",{attrs:{id:"fedora-server-33"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fedora-server-33"}},[a._v("#")]),a._v(" Fedora Server 33")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" --silent --location https://dl.yarnpkg.com/rpm/yarn.repo "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/yum.repos.d/yarn.repo\n")])])]),e("h2",{attrs:{id:"install-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-dependencies"}},[a._v("#")]),a._v(" Install dependencies")]),a._v(" "),e("h3",{attrs:{id:"ubuntu-server-20-04-lts-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-server-20-04-lts-2"}},[a._v("#")]),a._v(" Ubuntu Server 20.04 LTS")]),a._v(" "),e("p",[a._v("Then we install the dependencies. We also install "),e("code",[a._v("screen")]),a._v(" to run it in the background later on.")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" remove cmdtest\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mongodb redis-server docker.io "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("screen")]),a._v("\n")])])]),e("h3",{attrs:{id:"fedora-server-33-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fedora-server-33-2"}},[a._v("#")]),a._v(" Fedora Server 33")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF"),e("span",{pre:!0,attrs:{class:"token bash punctuation"}},[a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/yum.repos.d/mongodb.repo")]),a._v("\n[mongodb-4.2]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/7/mongodb-org/4.2/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-4.2.asc\nEOF")]),a._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf -y "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" dnf-plugins-core\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" mongodb-org redis docker-ce docker-ce-cli containerd.io "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("screen")]),a._v("\n")])])]),e("h2",{attrs:{id:"firewall-rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#firewall-rules"}},[a._v("#")]),a._v(" Firewall rules")]),a._v(" "),e("p",[a._v("If you're using firewalld, you must add these rules")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --change-interface"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("br0\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5353")]),a._v("/udp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("45917")]),a._v("/udp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v("/udp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("51515")]),a._v("/udp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" firewall-cmd --permanent --zone"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("docker --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("42311")]),a._v("/udp\n")])])]),e("h2",{attrs:{id:"info"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#info"}},[a._v("#")]),a._v(" Info")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("In the following replace "),e("code",[a._v("YOURDOMAIN")]),a._v(". You may want to use a subdomain like "),e("code",[a._v("cryb.example.org")]),a._v(" or your main domain "),e("code",[a._v("example.org")])])]),a._v(" "),e("h2",{attrs:{id:"create-discord-application"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-discord-application"}},[a._v("#")]),a._v(" Create Discord Application")]),a._v(" "),e("p",[a._v("Since login works via Discord you need you create a Discord application."),e("br"),a._v("\nVisit the "),e("a",{attrs:{href:"https://discord.com/developers/applications",target:"_blank",rel:"noopener noreferrer"}},[a._v("Discord Developer Portal"),e("OutboundLink")],1),a._v(" to do so.")]),a._v(" "),e("ul",[e("li",[a._v("Click on "),e("code",[a._v("New application")]),a._v(" and give it a name.")]),a._v(" "),e("li",[a._v("Then copy and save the "),e("code",[a._v("Client ID")]),a._v(" and "),e("code",[a._v("Client Secret")]),a._v(" (You will need them later)")]),a._v(" "),e("li",[a._v("Now go to "),e("code",[a._v("OAuth2")]),a._v(" and a "),e("code",[a._v("Redirect")]),a._v(" "),e("ul",[e("li",[a._v("If you plan on using a "),e("RouterLink",{attrs:{to:"/installation/#setup-reverse-proxy"}},[a._v("reverse proxy")]),a._v(" just add "),e("code",[a._v("https://YOURDOMAIN/auth/discord")])],1),a._v(" "),e("li",[a._v("Otherwise, add "),e("code",[a._v("http://YOURDOMAIN:3000/auth/discord")])])])])]),a._v(" "),e("h2",{attrs:{id:"clone-repositories"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clone-repositories"}},[a._v("#")]),a._v(" Clone repositories")]),a._v(" "),e("p",[a._v("Create a directory and clone all required repositories")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" cryb\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/crybapp/api.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/crybapp/web.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/crybapp/portals.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/crybapp/portal.git\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/crybapp/janus-docker.git\n")])])]),e("h2",{attrs:{id:"setup-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-api"}},[a._v("#")]),a._v(" Setup API")]),a._v(" "),e("p",[a._v("Move into the "),e("code",[a._v("api")]),a._v(" directory")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" api\n")])])]),e("p",[a._v("Install dependencies")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),e("p",[a._v("Rename environment file and edit")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" .env.example .env\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env\n")])])]),e("p",[a._v("Set")]),a._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("production")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("JWT_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("bigcrybfan")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("MONGO_URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("mongodb://localhost:27017/cryb")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("PORTALS_API_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("thinkingwithportals")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("REDIS_URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("redis://localhost:6379")]),a._v("\n")])])]),e("p",[a._v("For Discord, we set")]),a._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DISCORD_CLIENT_ID")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("<Your client ID here>")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DISCORD_CLIENT_SECRET")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("<Your client secret here>")]),a._v("\n")])])]),e("ul",[e("li",[a._v("If you plan on using a "),e("RouterLink",{attrs:{to:"/installation/#setup-reverse-proxy"}},[a._v("reverse proxy")]),a._v(" set\n"),e("ul",[e("li",[e("code",[a._v("DISCORD_OAUTH_ORIGINS=https://YOURDOMAIN")])]),a._v(" "),e("li",[e("code",[a._v("DISCORD_CALLBACK_URL=https://YOURDOMAIN/auth/discord")])])])],1),a._v(" "),e("li",[a._v("Otherwise, set\n"),e("ul",[e("li",[e("code",[a._v("DISCORD_OAUTH_ORIGINS=http://YOURDOMAIN:3000")])]),a._v(" "),e("li",[e("code",[a._v("DISCORD_CALLBACK_URL=http://YOURDOMAIN:3000/auth/discord")])])])])]),a._v(" "),e("h2",{attrs:{id:"setup-web"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-web"}},[a._v("#")]),a._v(" Setup Web")]),a._v(" "),e("p",[a._v("Move into the "),e("code",[a._v("web")]),a._v(" directory")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" web\n")])])]),e("p",[a._v("Install dependencies")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),e("p",[a._v("Rename environment file and edit")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" .env.example .env\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env\n")])])]),e("p",[a._v("Set")]),a._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("production")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("COOKIE_DOMAIN")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v(".YOURDOMAIN")]),a._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),e("p",[a._v("Important: you need that "),e("code",[a._v(".")]),a._v(" in front of "),e("code",[a._v("YOURDOMAIN")])])]),a._v(" "),e("ul",[e("li",[a._v("If you plan on using a "),e("RouterLink",{attrs:{to:"/installation/#setup-reverse-proxy"}},[a._v("reverse proxy")]),a._v(" set\n"),e("ul",[e("li",[e("code",[a._v("API_WS_URL=wss://YOURDOMAIN/apiws")])]),a._v(" "),e("li",[e("code",[a._v("API_BASE_URL=https://YOURDOMAIN/api")])]),a._v(" "),e("li",[e("code",[a._v("WEB_BASE_URL=https://YOURDOMAIN")])]),a._v(" "),e("li",[e("code",[a._v("JANUS_URL=https://YOURDOMAIN/janus")])])])],1),a._v(" "),e("li",[a._v("Otherwise, set\n"),e("ul",[e("li",[e("code",[a._v("API_WS_URL=ws://YOURDOMAIN:4000")])]),a._v(" "),e("li",[e("code",[a._v("API_BASE_URL=http://YOURDOMAIN:4000")])]),a._v(" "),e("li",[e("code",[a._v("WEB_BASE_URL=http://YOURDOMAIN:3000")])]),a._v(" "),e("li",[e("code",[a._v("JANUS_URL=http://YOURDOMAIN:8088")])])])])]),a._v(" "),e("h2",{attrs:{id:"create-docker-network"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-docker-network"}},[a._v("#")]),a._v(" Create Docker network")]),a._v(" "),e("p",[a._v("We will create a docker network for the portals communication")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create -d bridge --subnet "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.0/24 --gateway "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.1 portalnet\n")])])]),e("h2",{attrs:{id:"setup-portals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-portals"}},[a._v("#")]),a._v(" Setup Portals")]),a._v(" "),e("p",[a._v("Move into the "),e("code",[a._v("portals")]),a._v(" directory")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" portals\n")])])]),e("p",[a._v("Install dependencies")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),e("p",[a._v("Rename environment file and edit")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" .env.example .env\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env\n")])])]),e("p",[a._v("Set")]),a._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("production")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("MONGODB_URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("mongodb://localhost:27017/cryb")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("REDIS_URI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("redis://localhost:6379")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("API_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("thinkingwithportals")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("PORTAL_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("ilikeportals")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DRIVER")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("docker")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DOCKER_SOCK")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/var/run/docker.sock")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DOCKER_IMAGE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("cryb/portal")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DOCKER_SHM_SIZE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1024")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("DOCKER_NETWORK")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("portalnet")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ENABLE_JANUS")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("true")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("JANUS_HOSTNAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("localhost")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("JANUS_STREAMING_ADMIN_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("supersecret")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("JANUS_PORT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("8088")]),a._v("\n")])])]),e("h2",{attrs:{id:"setup-janus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-janus"}},[a._v("#")]),a._v(" Setup Janus")]),a._v(" "),e("p",[a._v("Move into the "),e("code",[a._v("janus-docker")]),a._v(" directory")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" janus-docker\n")])])]),e("p",[a._v("Rename config files")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" configs\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" janus.jcfg.example janus.jcfg\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" janus.plugin.streaming.jcfg.example janus.plugin.streaming.jcfg\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" janus.transport.http.jcfg.example janus.transport.http.jcfg\n")])])]),e("p",[a._v("Edit streaming config")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" janus.plugin.streaming.jcfg\n")])])]),e("p",[a._v("Uncomment "),e("code",[a._v('#admin_key = "supersecret"')]),a._v(" under "),e("code",[a._v("general")])]),a._v(" "),e("p",[a._v("Go back and build docker image")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" -t cryb/janus\n")])])]),e("h2",{attrs:{id:"setup-portal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-portal"}},[a._v("#")]),a._v(" Setup Portal")]),a._v(" "),e("p",[a._v("Move into the "),e("code",[a._v("portal")]),a._v(" directory")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" portal\n")])])]),e("p",[a._v("Install dependencies")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),e("p",[a._v("Rename environment file and edit")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" .env.example .env\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env\n")])])]),e("p",[a._v("Set")]),a._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("NODE_ENV")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("production")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("PORTALS_WS_URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("ws://192.168.0.1:5000")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("STREAMING_URL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("192.168.0.1")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("PORTALS_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("ilikeportals")]),a._v("\n")])])]),e("p",[a._v("Build docker image")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" docker:build\n")])])]),e("h2",{attrs:{id:"start-everything"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-everything"}},[a._v("#")]),a._v(" Start everything")]),a._v(" "),e("h3",{attrs:{id:"start-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-api"}},[a._v("#")]),a._v(" Start API")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb/api\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("screen")]),a._v(" -S cryb-api\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" start\n")])])]),e("h3",{attrs:{id:"start-web"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-web"}},[a._v("#")]),a._v(" Start Web")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb/web\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("screen")]),a._v(" -S cryb-web\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" start\n")])])]),e("h3",{attrs:{id:"start-portals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-portals"}},[a._v("#")]),a._v(" Start Portals")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb/portals\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("screen")]),a._v(" -S cryb-portals\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" start\n")])])]),e("h3",{attrs:{id:"start-janus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-janus"}},[a._v("#")]),a._v(" Start Janus")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb/janus-docker\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run --rm --name cryb-janus -it --net"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host -d cryb/janus\n")])])]),e("h3",{attrs:{id:"start-a-portal-manually"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-a-portal-manually"}},[a._v("#")]),a._v(" Start a portal manually")]),a._v(" "),e("p",[a._v("If you've set "),e("code",[a._v("DRIVER=docker")]),a._v(" in the "),e("code",[a._v("portals/.env")]),a._v(" portals should automatically start. If you want you can set it to "),e("code",[a._v("manual")]),a._v(" and start them manually.\nLook into the "),e("code",[a._v("cryb-portals")]),a._v(" output for the ID (just the numbers) and start a portal:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" cryb/portal\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" docker:dev --portalId "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("Portal-ID"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h2",{attrs:{id:"setup-reverse-proxy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-reverse-proxy"}},[a._v("#")]),a._v(" Setup reverse proxy")]),a._v(" "),e("p",[a._v("Now we'll setup a reverse proxy which enables everything to run with SSL and on the root of your domain.")]),a._v(" "),e("h3",{attrs:{id:"dns"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[a._v("#")]),a._v(" DNS")]),a._v(" "),e("p",[a._v("Add an "),e("code",[a._v("A")]),a._v(" entry with the IP of your VPS, and a (sub)domain which you chose earlier.\n"),e("img",{attrs:{src:s(376),alt:"DNS Setup"}})]),a._v(" "),e("h3",{attrs:{id:"install-stuff"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-stuff"}},[a._v("#")]),a._v(" Install stuff")]),a._v(" "),e("p",[a._v("For this we will install nginx and certbot")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" nginx certbot python3-certbot-nginx\n")])])]),e("h3",{attrs:{id:"run-certbot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-certbot"}},[a._v("#")]),a._v(" Run certbot")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" certbot --nginx -d YOURDOMAIN\n")])])]),e("h3",{attrs:{id:"edit-nginx-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#edit-nginx-config"}},[a._v("#")]),a._v(" Edit nginx config")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" /etc/nginx/sites-available/default\n")])])]),e("p",[a._v("Replace the "),e("code",[a._v("location /")]),a._v(" section with")]),a._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" http://127.0.0.1:3000/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Real-IP "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-For "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-Proto "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$scheme")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("client_max_body_size")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /api")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" http://127.0.0.1:4000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("rewrite")]),a._v("    /api/(.*) /"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" break")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Real-IP "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-For "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-Proto "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$scheme")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("client_max_body_size")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /apiws")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" http://127.0.0.1:4000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_http_version")]),a._v(" 1.1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Upgrade "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_upgrade")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Connection "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Upgrade"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /janus")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" http://127.0.0.1:8088")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("rewrite")]),a._v("    /janus/(.*) /"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" break")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Real-IP "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-For "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-Proto "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$scheme")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("client_max_body_size")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("Restart nginx")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" nginx restart\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);